"use strict";(self["webpackChunkcareer_guidance"]=self["webpackChunkcareer_guidance"]||[]).push([[922],{2922:function(e,l,t){t.r(l),t.d(l,{default:function(){return F}});var a=t(3396),s=t(7139),n=t(9242),i=t(9173),u=t(1581),o=t(7013);const d=(0,a._)("h2",{class:"admin__subtitle"},"Управление пользователями",-1),r={class:"table admin__table"},c=(0,a._)("tr",null,[(0,a._)("th",null,"Логин"),(0,a._)("th",null,"Почта"),(0,a._)("th",null,"Пароль"),(0,a._)("th",null,"Статус"),(0,a._)("th",null,"Город"),(0,a._)("th",null,"Изменить"),(0,a._)("th",null,"Удалить")],-1),A=["disabled","value"],m=["disabled","value"],_=["disabled"],p=["disabled"],v=["selected"],U=["selected"],b=["disabled"],f=["selected"],w=["selected"],g=["selected"],h=["selected"],C=["onClick"],D=["onClick"],E=["onClick"],B=(0,a._)("option",{value:"ROLE_USER"},"user",-1),N=(0,a._)("option",{value:"ROLE_ADMIN"},"admin",-1),x=[B,N],y=(0,a._)("option",{value:"Almaty"},"Алматы",-1),V=(0,a._)("option",{value:"Нур-Султан"},"Нур-Султан",-1),I=(0,a._)("option",{value:"Шымкент"},"Шымкент",-1),L=(0,a._)("option",{value:"Туркестан"},"Туркестан",-1),O=[y,V,I,L],R={colspan:"2"};function k(e,l,t,B,N,y){return(0,a.wg)(),(0,a.iD)(a.HY,null,[d,(0,a._)("table",r,[c,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(B.users.slice().reverse(),((e,l)=>((0,a.wg)(),(0,a.iD)("tr",{key:l},[(0,a._)("td",null,[(0,a._)("input",{disabled:!B.inputDisabled[l],value:e.username,class:(0,s.C_)(["admin__table-input",B.inputDisabled[l]?"active":""]),ref_for:!0,ref:"userName"},null,10,A)]),(0,a._)("td",null,[(0,a._)("input",{disabled:!B.inputDisabled[l],value:e.email,class:(0,s.C_)(["admin__table-input",B.inputDisabled[l]?"active":""]),ref_for:!0,ref:"userMail"},null,10,m)]),(0,a._)("td",null,[(0,a._)("input",{disabled:!B.inputDisabled[l],value:"********",class:(0,s.C_)(["admin__table-input",B.inputDisabled[l]?"active":""]),ref_for:!0,ref:"userPassword"},null,10,_)]),(0,a._)("td",null,[(0,a._)("select",{disabled:!B.inputDisabled[l],class:(0,s.C_)(["admin__table-select",B.inputDisabled[l]?"active":""]),ref_for:!0,ref:"userStatus"},[(0,a._)("option",{selected:"ROLE_USER"===e.role,value:"ROLE_USER"},"user",8,v),(0,a._)("option",{selected:"ROLE_ADMIN"===e.role,value:"ROLE_ADMIN"},"admin",8,U)],10,p)]),(0,a._)("td",null,[(0,a._)("select",{disabled:!B.inputDisabled[l],class:(0,s.C_)(["admin__table-input",B.inputDisabled[l]?"active":""]),ref_for:!0,ref:"userLocation"},[(0,a._)("option",{selected:"Алматы"===e.location,value:"Алматы"},"Алматы",8,f),(0,a._)("option",{selected:"Нур-Султан"===e.location,value:"Нур-Султан"},"Нур-Султан",8,w),(0,a._)("option",{selected:"Шымкент"===e.location,value:"Шымкент"},"Шымкент",8,g),(0,a._)("option",{selected:"Туркестан"===e.location,value:"Туркестан"},"Туркестан",8,h)],10,b)]),(0,a._)("td",null,[B.inputDisabled[l]?((0,a.wg)(),(0,a.iD)("img",{key:1,class:"admin__table-edit",src:u,alt:"edit",onClick:t=>B.saveData(e,l)},null,8,D)):((0,a.wg)(),(0,a.iD)("img",{key:0,class:"admin__table-edit",src:i,alt:"edit",onClick:e=>B.editClick(l)},null,8,C))]),(0,a._)("td",null,["ROLE_USER"===e.role?((0,a.wg)(),(0,a.iD)("img",{key:0,class:"admin__table-edit",src:o,alt:"edit",onClick:l=>B.remove(e)},null,8,E)):(0,a.kq)("",!0)])])))),128)),(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{class:"admin__table-input newUser",placeholder:"Имя",type:"text","onUpdate:modelValue":l[0]||(l[0]=e=>B.newUser.username=e)},null,512),[[n.nr,B.newUser.username]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{class:"admin__table-input newUser",placeholder:"Почта",type:"text","onUpdate:modelValue":l[1]||(l[1]=e=>B.newUser.email=e)},null,512),[[n.nr,B.newUser.email]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{class:"admin__table-input newUser",placeholder:"Пароль",type:"text","onUpdate:modelValue":l[2]||(l[2]=e=>B.newUser.password=e)},null,512),[[n.nr,B.newUser.password]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":l[3]||(l[3]=e=>B.newUser.status=e),class:"admin__table-select newUser"},x,512),[[n.bM,B.newUser.status]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":l[4]||(l[4]=e=>B.newUser.location=e),class:"admin__table-select newUser"},O,512),[[n.bM,B.newUser.location]])]),(0,a._)("td",R,[(0,a._)("button",{type:"button",class:"btn green small",onClick:l[5]||(l[5]=(...e)=>B.create&&B.create(...e))},"Создать")])])])],64)}t(7658);var H=t(4870),M=t(65),S=t(4161),j={name:"AdminUser",setup(){(0,a.bv)((async()=>await e.dispatch("setAllUsers")));let e=(0,M.oR)(),l=(0,a.Fl)((()=>e.getters.getUsers)),t=(0,H.qj)([]);for(let a=0;a<l.value.length;a++)t.push(!1);let s=(0,H.qj)({username:"",email:"",password:"",status:"ROLE_USER",location:"Almaty"}),n=document.getElementsByClassName("newUser");const i=(0,H.iH)(""),u=(0,H.iH)(""),o=(0,H.iH)(""),d=(0,H.iH)(""),r=(0,H.iH)(""),c=function(e){t[e]=!t[e],o.value[e].value=""};let A=async function(l,a){let s={username:i.value[a].value,email:u.value[a].value,role:d.value[a].value,location:r.value[a].value};o.value[a].value&&(s["password"]=o.value[a].value),S.Z.put("user/"+l.id,s).then((l=>{try{200===l.status&&(e.commit("setNotificationInfo",{titleValue:"Успех",text:`Данные пользователя ${i.value[a].value} успешно обновлены!`,mode:"success"}),e.dispatch("setAllUsers"))}catch(t){console.log(t)}try{const t=l.response.data,a=t.error;a&&e.commit("setNotificationInfo",{titleValue:"Упс",text:a,mode:"danger"})}catch(t){console.log(t)}})).catch((e=>console.log(e.message))),o.value[a].value="*********",t[a]=!1},m=function(t){let a=l.value.indexOf(t);S.Z["delete"]("user/"+t.id).then((l=>{200===l.status?(e.commit("removeUser",a),e.dispatch("setAllUsers"),e.commit("setNotificationInfo",{titleValue:"Успех",text:`Вы успешно удалили пользователя ${t.username}`,mode:"success"})):e.commit("setNotificationInfo",{titleValue:"Упс",text:"Что-то пошло не так",mode:"danger"})}))};(0,a.YP)(l,((l,t)=>{console.log(e.getters.getUsers)}));let _=function(){S.Z.post("user",{username:s.username,email:s.email,password:s.password,role:s.status,location:s.location}).then((l=>{if(200===l.status){s.username="",s.email="",s.password="",s.role="ROLE_USER";for(let e=0;e<n.length;e++)n[e].style.border="1px solid black";e.commit("setNotificationInfo",{titleValue:"Успех",text:"Вы успешно добавили нового пользователя",mode:"success"}),e.dispatch("setAllUsers")}else{const t=l.response.data,a=t.error;a&&e.commit("setNotificationInfo",{titleValue:"Упс",text:a,mode:"danger"})}document.documentElement.scrollTop=0}))};return{users:l,inputDisabled:t,saveData:A,remove:m,create:_,userName:i,userMail:u,userPassword:o,userStatus:d,userLocation:r,newUser:s,editClick:c}}},Q=t(89);const Y=(0,Q.Z)(j,[["render",k]]);var F=Y},9173:function(e,l,t){e.exports=t.p+"img/edit.2e2d70a5.png"},7013:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAF0SURBVEiJ1dU9SxxRFMbxn2aCq64EFC0MCAFtQgrBkCa1XZoUNhYW4ifQVj+JoNjb2adLI6aySCOEFIE0IcoajLBginuWDHqvO66VB4YZzsv93/Pcl+Gp21CDnNc4wi9chO8FpvABX+8rHm4AOMJcxj8XsXutagA4j+fdLf+XBrV3JJrCHt7iO/5gqTBg3d+WOjrBuiQn8h1UmMVlAH4WJlf3T0ZNE0VUuMF2k+Swnai5A8gtchdXUtuwis34XsABnmMRu5LM7ajpNgGQ5JmI74+SrvAea3iJZWxgPHIvcwOVAJ0a4C9GMjkjtfhE1AwMaBUA3XgeDKhLdF0AtAJuEEDH/0UudVAHtAcB9JPo0R3UJarwrA/gQbuovga9QW530Qp4D/CoNSgBerHxEqB0d3QiNopP2MdvfJZO8g8cxszHIjcLKNmWdLdMN8ididzNXLDUQe+UHuOsD2A+3rmdVvxlVpIEb/CtD+AVTrEic9k9ffsHOd1SaGw1QXYAAAAASUVORK5CYII="},1581:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAtQAAALUBOdDOnwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFmSURBVEiJ7daxalRREMbx3yxLbEICNhqwscgLhBSpBYXt0ojYmS5a5QFSir2kWfIGQbCxELUQUoi1lWDaECVBElhhibBjsWchuewmN3uDhfjBNDPnfv9z7lzmHljCOwyQDeMjZjPTKKKYf0a3QF5iD1vqaxMt3MFNdDKzB23cx5PMPICI6KOXmT8muUVEFyv4jTX8KqWHeIW3EdHJzF4LUY53Fa1iuzy7PEpm5mmB/CyQ2dYVjc/qE46qyQrkTbsBYKIy8zQinmK/yQnWcPeC+oBh56vq48Yl5s8xj128L+v74xaOe0Wv0Y2IrzieAPhWAu7hMR7UBXzACzwru7xMh9jIzC/jiqNPdCEzv9cwq62IuI2DJk2upXOAiNiKiGwY50ZMtQeL2MDOlBt+hM5FADiZth8RcVLN/d0e/Af8u4A0HBnXrUC2DYfbevnPzmAuIm5NaTqHmYhYwHrxvtZryygGxXPpD158mliABpn5AAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=922.75b926f3.js.map