{"version":3,"file":"js/45.789e2d89.js","mappings":"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","sources":["webpack://career_guidance/./src/views/Account.vue","webpack://career_guidance/./src/views/Account.vue?727f"],"sourcesContent":["<template>\r\n<div class=\"account\">\r\n  <h1 class=\"account__title\">Профиль</h1>\r\n  <div class=\"account__wrapper\">\r\n    <div class=\"account__item\">\r\n      <span class=\"account__item-text\">Имя</span>\r\n      <span class=\"account__item-input\">\r\n        <input disabled type=\"text\" v-model.trim=\"name\" ref=\"nameRef\">\r\n      </span>\r\n    </div><!-- ./account__item -->\r\n    <div class=\"account__item\">\r\n      <span class=\"account__item-text\">Почта</span>\r\n      <span class=\"account__item-input\">\r\n        <input :disabled=\"disabled\" type=\"text\" v-model.trim=\"mail\" ref=\"mailRef\">\r\n      </span>\r\n    </div><!-- ./account__item -->\r\n    <div class=\"account__item\">\r\n      <span class=\"account__item-text\">Пароль</span>\r\n      <span class=\"account__item-input\">\r\n        <input :disabled=\"disabled\" type=\"password\" v-model.trim=\"password\" ref=\"passwordRef\">\r\n      </span>\r\n    </div><!-- ./account__item -->\r\n    <div class=\"account__item\">\r\n      <span class=\"account__item-text\">Город</span>\r\n      <span class=\"account__item-input\">\r\n        <select v-model=\"location\" :disabled=\"disabled\">\r\n          <option :selected=\"location === 'Алматы'\" value=\"Алматы\">Алматы</option>\r\n          <option :selected=\"location === 'Нур-Султан'\" value=\"Нур-Султан\">Нур-Султан</option>\r\n          <option :selected=\"location === 'Шымкент'\" value=\"Шымкент\">Шымкент</option>\r\n          <option :selected=\"location === 'Туркестан'\" value=\"Туркестан\">Туркестан</option>\r\n        </select>\r\n      </span>\r\n    </div><!-- ./account__item -->\r\n  </div><!--./account__wrapper -->\r\n  <button v-if=\"disabled\" type=\"button\" class=\"account__button btn white\" @click=\"changeData\">Изменить данные</button>\r\n  <div v-else>\r\n    <button type=\"button\" class=\"account__button btn green\" @click=\"saveChanges\">Сохранить изменения</button>\r\n    <a href=\"#\" @click=\"cancelChange\">Отмена</a>\r\n  </div>\r\n  <div class=\"account__back\">\r\n    <a href=\"#\" @click=\"$router.go(-1)\">Назад</a>\r\n  </div>\r\n</div><!-- ./account -->\r\n</template>\r\n\r\n<script>\r\nimport {onMounted, ref, watch} from \"vue\";\r\nimport {useStore} from \"vuex\";\r\nimport store from \"@/store\";\r\nimport router from \"@/router\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"Account\",\r\n  methods: {\r\n    router() {\r\n      return router\r\n    }\r\n  },\r\n  setup() {\r\n    onMounted(() => {\r\n      name.value = users.filter((el) => el.id === parseInt(userId))[0].username\r\n      mail.value = users.filter((el) => el.id === parseInt(userId))[0].email\r\n      location.value = users.filter((el) => el.id === parseInt(userId))[0].location\r\n      status.value = users.filter((el) => el.id === parseInt(userId))[0].role\r\n    })\r\n\r\n    let store = useStore(),\r\n        name = ref(''),\r\n        mail = ref(''),\r\n        password = ref(''),\r\n        location = ref(''),\r\n        status = ref(''),\r\n        users = store.getters.getUsers,\r\n        userId = store.getters.getUserId,\r\n        disabled = ref(true),\r\n        isSmthChanged = ref(false);\r\n\r\n\r\n    let namePattern = /^[a-zA-Z0-9_-]{4,16}$/;\r\n    let passwordPattern = /^.*(?=.{6,})(?=.*\\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*? ]).*$/;\r\n    let mailPattern = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;\r\n\r\n    const nameRef = ref(null),\r\n          passwordRef = ref(null),\r\n          mailRef = ref(null);\r\n\r\n    let validation = function () {\r\n      function nameFunction() {\r\n        if (!namePattern.test(name.value)) {\r\n          nameRef.value.style.outline = '1px solid red';\r\n          return false\r\n        } else {\r\n          nameRef.value.style.outline = '1px solid black';\r\n          return true\r\n        }\r\n      }\r\n\r\n      function mailFunction() {\r\n        if (!mailPattern.test(mail.value)) {\r\n          mailRef.value.style.outline = '1px solid red';\r\n          return false\r\n        } else {\r\n          mailRef.value.style.outline = '1px solid black';\r\n          return true\r\n        }\r\n      }\r\n\r\n      function passwordFunction() {\r\n        if (!passwordPattern.test(password.value)) {\r\n          passwordRef.value.style.outline = '1px solid red';\r\n          return false\r\n        } else {\r\n          passwordRef.value.style.outline = '1px solid black';\r\n          return true\r\n        }\r\n      }\r\n\r\n      if (nameFunction() && mailFunction() && passwordFunction()) {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n\r\n    let changeData = function () {\r\n      this.disabled = false;\r\n      passwordRef.value.type = 'text';\r\n      password.value = ''\r\n\r\n      watch(name, (count, prevCount) => isSmthChanged.value = true);\r\n      watch(mail, (count, prevCount) => isSmthChanged.value = true);\r\n      watch(password, (count, prevCount) => isSmthChanged.value = true);\r\n      watch(location, (count, prevCount) => isSmthChanged.value = true);\r\n    }\r\n\r\n    let cancelChange = function () {\r\n      this.disabled = true\r\n      passwordRef.value.type = 'password';\r\n      password.value = '*****************'\r\n    }\r\n\r\n    let changeUserData = function () {\r\n      const {data} = axios.put('user/' + userId, {\r\n        username: name.value,\r\n        email: mail.value,\r\n        password: password.value,\r\n        location: location.value\r\n      })\r\n\r\n      disabled.value = true;\r\n      store.commit('setNotificationInfo', { titleValue: 'Успех', text: 'Данные успешно изменены', mode: 'success'} )\r\n      isSmthChanged.value = false;\r\n      passwordRef.value.type = 'password';\r\n    }\r\n\r\n    let saveChanges = function () {\r\n      if(isSmthChanged.value) {\r\n        if(validation()) {\r\n          changeUserData();\r\n        }\r\n      }\r\n      else {\r\n        store.commit('setNotificationInfo', { titleValue: 'Упс', text: 'Похоже вы ничего не изменили', mode: 'danger'} )\r\n      }\r\n    }\r\n\r\n    return {\r\n      name, mail, password, location,\r\n      nameRef, passwordRef, mailRef,\r\n      saveChanges, changeData, cancelChange,\r\n      disabled\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./Account.vue?vue&type=template&id=43f4b486\"\nimport script from \"./Account.vue?vue&type=script&lang=js\"\nexport * from \"./Account.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"E:\\\\Vue\\\\career_guidance\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","disabled","type","$setup","name","$event","ref","_hoisted_7","_hoisted_8","_hoisted_9","mail","_hoisted_11","_hoisted_12","_hoisted_13","password","_hoisted_15","_hoisted_16","_hoisted_17","location","selected","value","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","onClick","_cache","args","changeData","_hoisted_23","saveChanges","href","cancelChange","_hoisted_24","_ctx","$router","go","methods","router","setup","onMounted","users","filter","el","id","parseInt","userId","username","email","status","role","store","useStore","getters","getUsers","getUserId","isSmthChanged","namePattern","passwordPattern","mailPattern","nameRef","passwordRef","mailRef","validation","nameFunction","test","style","outline","mailFunction","passwordFunction","this","watch","count","prevCount","changeUserData","data","axios","commit","titleValue","text","mode","__exports__","render"],"sourceRoot":""}