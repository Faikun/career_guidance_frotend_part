{"ast":null,"code":"import { useStore } from \"vuex\";\nimport { computed, onMounted, reactive, ref } from \"vue\";\nimport axios from \"axios\";\nexport default {\n  name: \"EduTemplate\",\n  props: ['city'],\n  async setup(props) {\n    const store = useStore();\n    onMounted(() => searchEdu());\n    await store.dispatch('setAllUniversities');\n    let universities = store.getters.getUniversity;\n    let dropdownActive = ref(false);\n    let searchDone = ref(false);\n    let edu = ref('');\n    let status = ref('Статус: Любой');\n    let area = ref('Область обучения');\n    let sub = await axios.get('subjects').then(data => data.data);\n    let checkedSubjects = reactive({});\n    sub.forEach(el => checkedSubjects[el.name] = false);\n    let hotel = ref(false),\n      military = ref(false);\n    let findCity = computed(() => universities.filter(el => el.location === props.city));\n    let findSubVal = computed(() => Object.values(checkedSubjects));\n    let findSubKey = computed(() => Object.keys(checkedSubjects)).value;\n    const getImgUrl = function (img) {\n      if (img.includes('http')) return img;\n      return require('@/images/' + img);\n    };\n    let searchEdu = function () {\n      let city = findCity.value;\n      const subjectValues = findSubVal.value;\n      if (edu.value.length > 0) city = city.filter(el => el.name.toUpperCase().match(edu.value.toUpperCase()));\n      if (status.value !== 'Статус: Любой') city = city.filter(el => el.status === status.value);\n      if (area.value !== 'Область обучения') city = city.filter(el => el.tags.some(el => el.name.includes(area.value)));\n      if (military.value) city = city.filter(el => el.military === true);\n      if (hotel.value) city = city.filter(el => el.hotel === true);\n      if (subjectValues.some(el => el === true)) {\n        console.log(city.filter(el => el.subjects.some(subject => findSubKey.includes(subject.name))));\n        city = city.filter(el => el.subjects.some(subject => findSubKey.includes(subject.name)));\n        /*for (let i = 0; i < findSubKey.length; i ++) {\r\n          city = city.filter((el) => el.subjects.some(subject => findSubKey[i].includes(subject.name)))\r\n        }*/\n      }\n\n      searchDone.value = true;\n      return city;\n    };\n    return {\n      dropdownActive,\n      searchEdu,\n      edu,\n      searchDone,\n      status,\n      area,\n      hotel,\n      military,\n      getImgUrl,\n      sub,\n      checkedSubjects\n    };\n  }\n};","map":{"version":3,"names":["useStore","computed","onMounted","reactive","ref","axios","name","props","setup","store","searchEdu","dispatch","universities","getters","getUniversity","dropdownActive","searchDone","edu","status","area","sub","get","then","data","checkedSubjects","forEach","el","hotel","military","findCity","filter","location","city","findSubVal","Object","values","findSubKey","keys","value","getImgUrl","img","includes","require","subjectValues","length","toUpperCase","match","tags","some","console","log","subjects","subject"],"sources":["E:\\Vue\\career_guidance\\src\\components\\EduTemplate.vue"],"sourcesContent":["<template>\r\n  <div class=\"edu__search\">\r\n    <div class=\"edu__search-intro\">\r\n      <input type=\"text\" placeholder=\"Введите вуз\" v-model.lazy=\"edu\">\r\n      <button class=\"button\" type=\"button\" @click=\"searchEdu(true)\">Поиск</button>\r\n    </div><!-- ./edu__search__intro -->\r\n    <div class=\"edu__search-additional\">\r\n      <select class=\"edu__search-block\" v-model=\"status\">\r\n        <option value=\"Статус: Любой\">Статус: Любой</option>\r\n        <option value=\"государственный\">Государственный</option>\r\n        <option value=\"частный\">Частный</option>\r\n      </select><!-- ./edu__search-block -->\r\n      <select class=\"edu__search-block\" v-model=\"area\">\r\n        <option value=\"Область обучения\">Область обучения</option>\r\n        <option value=\"Pedagogy\">Педагогический</option>\r\n        <option value=\"Technology\">Технический</option>\r\n        <option value=\"Medicine\">Медицина</option>\r\n        <option value=\"Engineering\">Инженерия</option>\r\n        <option value=\"Business\">Бизнес</option>\r\n        <option value=\"Natural sciences\">Естествознание</option>\r\n        <option value=\"Economics\">Экономика</option>\r\n        <option value=\"Agriculture\">Сельское хозяйство</option>\r\n        <option value=\"Law\">Закон</option>\r\n        <option value=\"Music\">Музыка</option>\r\n        <option value=\"Arts\">Искусство</option>\r\n        <option value=\"Education\">Образование</option>\r\n      </select><!-- ./edu__search-block -->\r\n      <div class=\"edu__search-subjects\" @click=\"dropdownActive = !dropdownActive\">\r\n        <span>Предметы ЕНТ</span>\r\n        <img src=\"../images/png/arrow_toButton.png\" alt=\"arrow\">\r\n        <div class=\"edu__dropdown\" :class=\"dropdownActive ? 'active' : ''\" @click.stop>\r\n          <div class=\"edu__dropdown-item\" v-for=\"subject in sub\">\r\n            <label :for=\"subject.id\">{{ subject.name }}</label>\r\n            <input type=\"checkbox\" :id=\"subject.id\" v-model=\"checkedSubjects[subject.id]\">\r\n          </div>\r\n        </div><!-- ./edu__dropdown -->\r\n      </div><!-- ./edu__search-subjects -->\r\n      <div class=\"edu__checkbox\">\r\n        <label for=\"mildep\">военная кафедра</label>\r\n        <input type=\"checkbox\" id=\"mildep\" v-model=\"military\">\r\n      </div><!--./edu__checkbox -->\r\n      <div class=\"edu__checkbox\">\r\n        <label for=\"hostel\">общежитие</label>\r\n        <input type=\"checkbox\" id=\"hostel\" v-model=\"hotel\">\r\n      </div><!--./edu__checkbox -->\r\n    </div><!-- ./edu__search-additional -->\r\n  </div><!-- ./edu__search -->\r\n\r\n  <section class=\"edu__results\" v-if=\"searchDone\">\r\n    <ul class=\"edu__results-list\">\r\n      <li class=\"edu__results-top\">\r\n        <span>Найдено: {{ searchEdu().length }}</span>\r\n        <span>Проходной балл</span>\r\n        <span>Бюджетных мест</span>\r\n        <span>Внебюджетных мест</span>\r\n      </li>\r\n      <li class=\"edu__results-block\" v-for=\"edu in searchEdu()\">\r\n        <div class=\"edu__results-data first\">\r\n          <router-link :to=\"'/university/' + edu.name\" href=\"#\" class=\"edu__results-link\">\r\n            <img class=\"edu__results-logo\" :src=\"getImgUrl(edu.image)\" alt=\"logo\">\r\n            <h2>{{ edu.name }}</h2>\r\n          </router-link>\r\n          <div class=\"edu__results-additional\">\r\n            <span v-if=\"edu.hotel\">Общежитие</span>\r\n            <span v-if=\"edu.military\">Военная кафедра</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"edu__results-data\">\r\n          {{ edu.passScores }}\r\n        </div>\r\n        <div class=\"edu__results-data\">\r\n          {{ edu.budget }}\r\n        </div>\r\n        <div class=\"edu__results-data\">\r\n          {{ edu.offBudget }}\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </section><!-- ./edu__results -->\r\n\r\n</template>\r\n\r\n<script>\r\nimport {useStore} from \"vuex\";\r\nimport {computed, onMounted, reactive, ref} from \"vue\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"EduTemplate\",\r\n  props: ['city'],\r\n  async setup(props) {\r\n    const store = useStore()\r\n\r\n    onMounted(() => searchEdu());\r\n\r\n    await store.dispatch('setAllUniversities')\r\n    let universities = store.getters.getUniversity;\r\n\r\n    let dropdownActive = ref(false);\r\n    let searchDone = ref(false);\r\n\r\n    let edu = ref('');\r\n    let status = ref('Статус: Любой');\r\n    let area = ref('Область обучения');\r\n\r\n    let sub = await axios.get('subjects').then(data => data.data)\r\n\r\n    let checkedSubjects = reactive({});\r\n    sub.forEach(el => checkedSubjects[el.name] = false)\r\n\r\n    let hotel = ref(false),\r\n        military = ref(false);\r\n\r\n    let findCity = computed(() => universities.filter((el) => el.location === props.city));\r\n    let findSubVal = computed(() => Object.values(checkedSubjects));\r\n    let findSubKey = computed(() => Object.keys(checkedSubjects)).value;\r\n\r\n    const getImgUrl = function (img) {\r\n      if(img.includes('http'))\r\n        return img\r\n\r\n      return require('@/images/' + img);\r\n    }\r\n\r\n\r\n    let searchEdu = function () {\r\n      let city = findCity.value;\r\n      const subjectValues = findSubVal.value;\r\n\r\n      if(edu.value.length > 0)\r\n        city = city.filter((el) => el.name.toUpperCase().match(edu.value.toUpperCase()))\r\n\r\n      if(status.value !== 'Статус: Любой')\r\n        city = city.filter((el) => el.status === status.value)\r\n\r\n      if(area.value !== 'Область обучения')\r\n        city = city.filter((el) => el.tags.some(el => el.name.includes(area.value)))\r\n\r\n      if(military.value)\r\n        city = city.filter((el) => el.military === true)\r\n\r\n      if(hotel.value)\r\n        city = city.filter((el) => el.hotel === true)\r\n\r\n      if(subjectValues.some(el => el === true)) {\r\n        console.log(city.filter((el) => el.subjects.some(subject => findSubKey.includes(subject.name))))\r\n        city = city.filter((el) => el.subjects.some(subject => findSubKey.includes(subject.name)))\r\n          /*for (let i = 0; i < findSubKey.length; i ++) {\r\n            city = city.filter((el) => el.subjects.some(subject => findSubKey[i].includes(subject.name)))\r\n          }*/\r\n      }\r\n\r\n      searchDone.value = true;\r\n      return city\r\n    }\r\n\r\n    return {\r\n      dropdownActive,\r\n      searchEdu, edu,\r\n      searchDone,\r\n      status, area,\r\n      hotel, military,\r\n      getImgUrl,\r\n      sub, checkedSubjects\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}