{"ast":null,"code":"import { onMounted, ref, watch } from \"vue\";\nimport { useStore } from \"vuex\";\nimport store from \"@/store\";\nexport default {\n  name: \"Account\",\n  setup() {\n    onMounted(() => {\n      name.value = users.filter(el => el.userId === parseInt(userId))[0].name;\n      mail.value = users.filter(el => el.userId === parseInt(userId))[0].mail;\n      password.value = users.filter(el => el.userId === parseInt(userId))[0].password;\n    });\n    let store = useStore();\n    let name = ref('');\n    let mail = ref('');\n    let password = ref('');\n    let users = store.getters.getUsers;\n    let userId = store.getters.getUserId;\n    let disabled = ref(true);\n    let isSmthChanged = ref(false);\n    watch(name, (count, prevCount) => isSmthChanged.value = true);\n    watch(mail, (count, prevCount) => isSmthChanged.value = true);\n    watch(password, (count, prevCount) => isSmthChanged.value = true);\n    let namePattern = /^[a-zA-Z0-9_-]{4,16}$/;\n    // Имя пользователя от 4 до 16 символов (буквы, цифры, подчеркивания, знаки минус)\n    let passwordPattern = /^.*(?=.{6,})(?=.*\\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*? ]).*$/;\n    // минимум 6 символов, включая, как минимум 1 заглавную букву, 1 строчную букву, 1 цифру, 1 спец символ\n    let mailPattern = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;\n    // Полноценная почта\n\n    let nameRef,\n      passwordRed,\n      mailRef = ref('');\n    let iteration = function () {\n      function nameFunction() {\n        if (!namePattern.test(name.value)) {\n          nameRef.value.style.outline = '1px solid red';\n          return false;\n        } else {\n          nameRef.value.style.outline = '1px solid black';\n          return true;\n        }\n      }\n      function mailFunction() {\n        if (!mailPattern.test(mail.value)) {\n          mailRef.value.style.outline = '1px solid red';\n          return false;\n        } else {\n          mailRef.value.style.outline = '1px solid black';\n          return true;\n        }\n      }\n      function passwordFunction() {\n        if (!passwordPattern.test(password.value)) {\n          passwordRed.value.style.outline = '1px solid red';\n          return false;\n        } else {\n          passwordRed.value.style.outline = '1px solid black';\n          return true;\n        }\n      }\n      if (nameFunction() && mailFunction() && passwordFunction()) {\n        return true;\n      } else {\n        return false;\n      }\n    };\n    let saveChanges = function () {\n      if (isSmthChanged.value) {\n        if (iteration()) {\n          const index = users.findIndex(object => {\n            return object.mail === users.filter(el => el.userId === parseInt(userId))[0].mail;\n          });\n          store.commit('setUsers', {\n            index: index,\n            name: name.value,\n            mail: mail.value,\n            password: password.value\n          });\n          disabled.value = true;\n          store.commit('setNotificationInfo', {\n            titleValue: 'Успех',\n            text: 'Данные успешно изменены',\n            mode: 'success'\n          });\n          // TODO: Так же сделать валидацию и закрывать окошко account при клике на ссылку\n          isSmthChanged.value = false;\n        }\n      } else {\n        store.commit('setNotificationInfo', {\n          titleValue: 'Упс',\n          text: 'Похоже вы ничего не изменили',\n          mode: 'danger'\n        });\n      }\n    };\n    return {\n      name,\n      mail,\n      password,\n      nameRef,\n      passwordRed,\n      mailRef,\n      saveChanges,\n      disabled\n    };\n  }\n};","map":{"version":3,"names":["onMounted","ref","watch","useStore","store","name","setup","value","users","filter","el","userId","parseInt","mail","password","getters","getUsers","getUserId","disabled","isSmthChanged","count","prevCount","namePattern","passwordPattern","mailPattern","nameRef","passwordRed","mailRef","iteration","nameFunction","test","style","outline","mailFunction","passwordFunction","saveChanges","index","findIndex","object","commit","titleValue","text","mode"],"sources":["E:\\Vue\\career_guidance\\src\\views\\Account.vue"],"sourcesContent":["<template>\r\n<div class=\"account\">\r\n  <h1 class=\"account__title\">Профиль</h1>\r\n  <div class=\"account__wrapper\">\r\n    <div class=\"account__item\">\r\n      <span class=\"account__item-text\">Имя</span>\r\n      <span class=\"account__item-input\">\r\n        <input :disabled=\"disabled\" type=\"text\" v-model.trim=\"name\" ref=\"nameRef\">\r\n      </span>\r\n    </div><!-- ./account__item -->\r\n    <div class=\"account__item\">\r\n      <span class=\"account__item-text\">Почта</span>\r\n      <span class=\"account__item-input\">\r\n        <input :disabled=\"disabled\" type=\"text\" v-model.trim=\"mail\" ref=\"mailRef\">\r\n      </span>\r\n    </div><!-- ./account__item -->\r\n    <div class=\"account__item\">\r\n      <span class=\"account__item-text\">Пароль</span>\r\n      <span class=\"account__item-input\">\r\n        <input :disabled=\"disabled\" type=\"password\" v-model.trim=\"password\" ref=\"passwordRef\">\r\n      </span>\r\n    </div><!-- ./account__item -->\r\n  </div><!--./account__wrapper -->\r\n  <button v-if=\"disabled\" type=\"button\" class=\"account__button btn white\" @click=\"disabled = false\">Изменить данные</button>\r\n  <button v-else type=\"button\" class=\"account__button btn green\" @click=\"saveChanges\">Сохранить изменения</button>\r\n  <div class=\"account__back\">\r\n    <a href=\"#\" @click=\"$router.go(-1)\">Назад</a>\r\n  </div>\r\n</div><!-- ./account -->\r\n</template>\r\n\r\n<script>\r\nimport {onMounted, ref, watch} from \"vue\";\r\nimport {useStore} from \"vuex\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"Account\",\r\n  setup() {\r\n    onMounted(() => {\r\n      name.value = users.filter((el) => el.userId === parseInt(userId))[0].name\r\n      mail.value = users.filter((el) => el.userId === parseInt(userId))[0].mail\r\n      password.value = users.filter((el) => el.userId === parseInt(userId))[0].password\r\n    })\r\n\r\n    let store = useStore()\r\n    let name = ref('');\r\n    let mail = ref('');\r\n    let password = ref('');\r\n    let users = store.getters.getUsers;\r\n    let userId = store.getters.getUserId;\r\n    let disabled = ref(true);\r\n    let isSmthChanged = ref(false);\r\n\r\n    watch(name, (count, prevCount) => isSmthChanged.value = true );\r\n    watch(mail, (count, prevCount) => isSmthChanged.value = true );\r\n    watch(password, (count, prevCount) => isSmthChanged.value = true );\r\n\r\n    let namePattern = /^[a-zA-Z0-9_-]{4,16}$/;\r\n    // Имя пользователя от 4 до 16 символов (буквы, цифры, подчеркивания, знаки минус)\r\n    let passwordPattern = /^.*(?=.{6,})(?=.*\\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*? ]).*$/;\r\n    // минимум 6 символов, включая, как минимум 1 заглавную букву, 1 строчную букву, 1 цифру, 1 спец символ\r\n    let mailPattern = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;\r\n    // Полноценная почта\r\n\r\n    let nameRef, passwordRed, mailRef = ref('')\r\n\r\n    let iteration = function () {\r\n      function nameFunction() {\r\n        if (!namePattern.test(name.value)) {\r\n          nameRef.value.style.outline = '1px solid red';\r\n          return false\r\n        } else {\r\n          nameRef.value.style.outline = '1px solid black';\r\n          return true\r\n        }\r\n      }\r\n\r\n      function mailFunction() {\r\n        if (!mailPattern.test(mail.value)) {\r\n          mailRef.value.style.outline = '1px solid red';\r\n          return false\r\n        } else {\r\n          mailRef.value.style.outline = '1px solid black';\r\n          return true\r\n        }\r\n      }\r\n\r\n      function passwordFunction() {\r\n        if (!passwordPattern.test(password.value)) {\r\n          passwordRed.value.style.outline = '1px solid red';\r\n          return false\r\n        } else {\r\n          passwordRed.value.style.outline = '1px solid black';\r\n          return true\r\n        }\r\n      }\r\n\r\n      if (nameFunction() && mailFunction() && passwordFunction()) {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n\r\n    let saveChanges = function () {\r\n      if(isSmthChanged.value) {\r\n        if(iteration()) {\r\n          const index = users.findIndex(object => {\r\n            return object.mail === users.filter((el) => el.userId === parseInt(userId))[0].mail;\r\n          });\r\n          store.commit('setUsers', {index: index,name: name.value, mail: mail.value, password: password.value});\r\n          disabled.value = true;\r\n          store.commit('setNotificationInfo', { titleValue: 'Успех', text: 'Данные успешно изменены', mode: 'success'} )\r\n          // TODO: Так же сделать валидацию и закрывать окошко account при клике на ссылку\r\n          isSmthChanged.value = false\r\n        }\r\n      }\r\n      else {\r\n        store.commit('setNotificationInfo', { titleValue: 'Упс', text: 'Похоже вы ничего не изменили', mode: 'danger'} )\r\n      }\r\n    }\r\n\r\n    return {\r\n      name, mail, password,\r\n      nameRef, passwordRed, mailRef,\r\n      saveChanges,\r\n      disabled\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}