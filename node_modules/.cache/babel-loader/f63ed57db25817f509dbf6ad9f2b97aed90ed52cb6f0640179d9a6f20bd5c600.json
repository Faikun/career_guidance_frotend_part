{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { computed, ref } from \"vue\";\nimport Notification from \"@/components/notification.vue\";\nimport router from \"@/router\";\nimport { useStore } from \"vuex\";\nexport default {\n  name: \"TheNavbar\",\n  components: {\n    Notification\n  },\n  setup() {\n    const store = useStore();\n    let search = ref('');\n    let account = ref('');\n    let searchActive = ref(false);\n    let toggle = ref(false);\n    const storeGetters = computed(() => store.getters);\n    let notification = store.getters.getNotificationInfo;\n    let searchFunction = function () {\n      router.push('/search/' + search.value);\n      searchActive.value = true;\n    };\n    let exitAcc = async function () {\n      // await axios.post('logout', {}, {withCredentials: true});\n\n      localStorage.removeItem('jwt_token');\n      store.commit('setAuth');\n      account.value = !account.value;\n      store.commit('setNotificationInfo', {\n        titleValue: 'Успех',\n        text: 'Вы успешно вышли со своего аккаунта',\n        mode: 'success'\n      });\n      await router.push('/');\n    };\n    let showAccBlock = function () {\n      if (store.getters.getAuth) {\n        account.value = !account.value;\n      } else {\n        store.commit('toggleOpenedAuth');\n        document.body.style.overflow = \"hidden\";\n        document.documentElement.scrollTop = 0;\n      }\n    };\n    let goToAcc = function () {\n      router.push('/account');\n      account.value = !account.value;\n    };\n    let goToHistory = function () {\n      router.push('/history');\n      account.value = !account.value;\n    };\n    let users, location;\n    store.dispatch('setAllUsers').then(e => {\n      users = computed(() => store.getters.getUsers);\n      if (store.getters.getUserId !== null) location = () => users.value.filter(el => el.id.toString() === store.getters.getUserId)[0].location;\n    });\n    console.log(users);\n    console.log(location);\n    return {\n      search,\n      searchActive,\n      toggle,\n      account,\n      showAccBlock,\n      store,\n      storeGetters,\n      exitAcc,\n      notification,\n      goToAcc,\n      goToHistory,\n      location,\n      searchFunction\n    };\n  }\n};","map":{"version":3,"names":["computed","ref","Notification","router","useStore","name","components","setup","store","search","account","searchActive","toggle","storeGetters","getters","notification","getNotificationInfo","searchFunction","push","value","exitAcc","localStorage","removeItem","commit","titleValue","text","mode","showAccBlock","getAuth","document","body","style","overflow","documentElement","scrollTop","goToAcc","goToHistory","users","location","dispatch","then","e","getUsers","getUserId","filter","el","id","toString","console","log"],"sources":["E:\\Vue\\career_guidance\\src\\components\\TheNavbar.vue"],"sourcesContent":["<template>\r\n  <div class=\"nav\">\r\n    <div class=\"container\">\r\n      <div class=\"nav__wrapper\">\r\n        <div class=\"nav__logo\">\r\n          <img src=\"../images/png/logo.png\" alt=\"logo\">\r\n        </div><!-- ./nav__logo -->\r\n\r\n        <nav class=\"nav__links\" :class=\"toggle ? 'shown' : ''\">\r\n          <router-link to=\"/tests\" class=\"nav__link\">Тесты</router-link>\r\n          <router-link v-if=\"store.getters.getAdmin\" to=\"/admin\" class=\"nav__link\">Админ</router-link>\r\n          <div class=\"nav__link dropdown\">\r\n            <span>Выбрать профессию</span>\r\n            <img class=\"nav__arrow\" src=\"../images/png/arrow_toButton.png\" alt=\"arrow\">\r\n\r\n            <div class=\"dropdown__content\">\r\n              <router-link to=\"/tests\">Тесты на выбор профессии</router-link>\r\n              <router-link to=\"/professions\">Все профессии</router-link>\r\n              <router-link to=\"/faq\">FAQ: Как выборать профессию</router-link>\r\n            </div>\r\n          </div><!-- ./nav__link -->\r\n          <div class=\"nav__link dropdown\">\r\n            <span>Поступить в вуз</span>\r\n            <img class=\"nav__arrow\" src=\"../images/png/arrow_toButton.png\" alt=\"arrow\">\r\n\r\n            <div class=\"dropdown__content\">\r\n              <router-link to=\"/edu/Алматы\">Вузы Алматы</router-link>\r\n              <router-link to=\"/edu/Нур-Султан\">Вузы Нур-Султана</router-link>\r\n              <router-link to=\"/edu/Шымкент\">Вузы Шымкента</router-link>\r\n              <a href=\"#\"\r\n                 v-if=\"store.getters.getAuth\"\r\n                 @click=\"$router.push(`/edu/${location}`)\"\r\n              >\r\n                Вузы в вашем городе</a>\r\n            </div>\r\n          </div><!-- ./nav__link -->\r\n        </nav><!-- ./nav__links -->\r\n\r\n        <div class=\"burger__item\" @click=\"toggle = !toggle\">\r\n          <button class=\"burger\" :class=\"toggle ? 'shown' : ''\" type=\"button\">\r\n            <span class=\"burger-item\">Menu</span>\r\n          </button>\r\n        </div>\r\n\r\n        <div class=\"nav__right\">\r\n          <div class=\"nav__search\" @click=\"searchActive = !searchActive\">\r\n            <img src=\"../images/png/Search.png\" alt=\"Search\">\r\n          </div>\r\n          <div class=\"nav__account\">\r\n            <img src=\"../images/png/Account.png\" alt=\"Account\" @click=\"showAccBlock\">\r\n            <div class=\"dropdown__account\" :class=\"account ? 'active' : ''\">\r\n              <a @click=\"goToAcc\">Аккаунт</a>\r\n              <a @click=\"goToHistory\">История</a>\r\n              <a href=\"#\" @click=\"exitAcc\">Выход</a>\r\n            </div>\r\n          </div>\r\n        </div><!-- ./nav__right -->\r\n      </div><!-- ./nav__wrapper -->\r\n\r\n      <transition name=\"fadeHeight\">\r\n        <div class=\"search\" v-if=\"searchActive\">\r\n          <input\r\n              class=\"search__input\"\r\n              type=\"text\"\r\n              v-model.trim=\"search\"\r\n              placeholder=\"Введите тест, профессию или вуз\"\r\n              @keyup.enter=\"searchFunction\"\r\n          >\r\n          <img class=\"search__icon\" src=\"../images/png/Search.png\" alt=\"icon\" @click=\"searchFunction\">\r\n        </div><!-- ./search -->\r\n      </transition>\r\n\r\n    </div><!-- ./container -->\r\n  </div><!-- ./nav -->\r\n\r\n  <div class=\"container\">\r\n    <notification\r\n        v-if=\"notification.openedNotification\"\r\n        :title=\"notification.title\"\r\n        :text=\"notification.text\"\r\n        :mode=\"notification.mode\"\r\n    ></notification>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {computed, ref} from \"vue\";\r\nimport Notification from \"@/components/notification.vue\";\r\nimport router from \"@/router\";\r\nimport {useStore} from \"vuex\";\r\n\r\nexport default {\r\n  name: \"TheNavbar\",\r\n  components: { Notification },\r\n  setup() {\r\n    const store = useStore()\r\n\r\n    let search = ref('');\r\n    let account = ref('');\r\n    let searchActive = ref(false);\r\n    let toggle = ref(false);\r\n    const storeGetters = computed(() => store.getters);\r\n    let notification = store.getters.getNotificationInfo;\r\n\r\n    let searchFunction = function () {\r\n      router.push('/search/' + search.value);\r\n      searchActive.value = true;\r\n    }\r\n\r\n    let exitAcc = async function () {\r\n      // await axios.post('logout', {}, {withCredentials: true});\r\n\r\n      localStorage.removeItem('jwt_token')\r\n      store.commit('setAuth')\r\n      account.value = !account.value;\r\n      store.commit('setNotificationInfo', { titleValue: 'Успех', text: 'Вы успешно вышли со своего аккаунта', mode: 'success'} );\r\n      await router.push('/')\r\n    }\r\n\r\n    let showAccBlock = function () {\r\n      if (store.getters.getAuth) {\r\n        account.value = !account.value;\r\n      }\r\n      else {\r\n        store.commit('toggleOpenedAuth');\r\n        document.body.style.overflow = \"hidden\";\r\n        document.documentElement.scrollTop = 0;\r\n      }\r\n    }\r\n\r\n    let goToAcc = function () {\r\n      router.push('/account');\r\n      account.value = !account.value;\r\n    };\r\n\r\n    let goToHistory = function () {\r\n      router.push('/history');\r\n      account.value = !account.value;\r\n    }\r\n\r\n    let users, location;\r\n\r\n    store.dispatch('setAllUsers').then( e => {\r\n          users = computed(() => store.getters.getUsers)\r\n          if (store.getters.getUserId !== null)\r\n            location = () => users.value.filter((el) => el.id.toString() === store.getters.getUserId)[0].location\r\n    })\r\n\r\n    console.log(users)\r\n    console.log(location)\r\n\r\n    return {\r\n      search,\r\n      searchActive,\r\n      toggle,\r\n      account,\r\n      showAccBlock,\r\n      store, storeGetters,\r\n      exitAcc,\r\n      notification,\r\n      goToAcc, goToHistory,\r\n      location,\r\n      searchFunction\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .fadeHeight-enter-from {\r\n    max-height: 0;\r\n    opacity: 0;\r\n  }\r\n  .fadeHeight-enter-active,\r\n  .fadeHeight-leave-active {\r\n    transition: all .5s ease-in-out;\r\n  }\r\n  .fadeHeight-leave-from {\r\n    max-height: 230px;\r\n    opacity: 1;\r\n  }\r\n  .fadeHeight-leave-to\r\n  {\r\n    opacity: 0;\r\n    max-height: 0;\r\n  }\r\n\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}