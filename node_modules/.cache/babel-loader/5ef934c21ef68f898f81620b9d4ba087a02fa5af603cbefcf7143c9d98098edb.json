{"ast":null,"code":"import { computed, onMounted } from \"vue\";\nimport { useStore } from \"vuex\";\nimport axios from \"axios\";\nexport default {\n  name: \"AdminUniversity\",\n  setup() {\n    onMounted(async () => {\n      await store.dispatch('setAllTags');\n      await store.dispatch('setAllSubjects');\n    });\n    const store = useStore();\n    let formUniversity = {\n      hasHotel: false,\n      hasMilitaryDepartment: false\n    };\n    const tags = computed(() => store.getters.getTags);\n    const subjects = computed(() => store.getters.getSubjects);\n    const sendUniversity = async function () {\n      const response = await axios.post('universities', {\n        name: formUniversity.name,\n        tags: formUniversity.tags.map(item => ({\n          id: item.id,\n          name: item.name\n        })),\n        subjects: formUniversity.subjects.map(item => ({\n          id: item.id,\n          name: item.name\n        })),\n        status: formUniversity.status,\n        image: formUniversity.image,\n        benefits: formUniversity.benefits,\n        location: formUniversity.location,\n        passScores: formUniversity.passScores,\n        budget: formUniversity.budget,\n        offBudget: formUniversity.offBudget,\n        hasHotel: formUniversity.hasHotel,\n        hasMilitaryDepartment: formUniversity.hasMilitaryDepartment,\n        description: formUniversity.description,\n        rating: formUniversity.rating,\n        link: formUniversity.link\n      }).then(res => {\n        try {\n          if (res.status === 200) {\n            store.commit('setNotificationInfo', {\n              titleValue: 'Успех',\n              text: 'Университет добавлен успешно!',\n              mode: 'success'\n            });\n          }\n        } catch (e) {\n          console.log(e);\n        }\n        try {\n          const data = res.response.data;\n          const error = data.error;\n          if (error) {\n            store.commit('setNotificationInfo', {\n              titleValue: 'Упс',\n              text: error,\n              mode: 'danger'\n            });\n          }\n        } catch (e) {\n          console.log(e);\n        }\n      }).catch(error => console.log(error));\n      document.documentElement.scrollTop = 0;\n    };\n    return {\n      formUniversity,\n      tags,\n      subjects,\n      sendUniversity\n    };\n  }\n};","map":{"version":3,"names":["computed","onMounted","useStore","axios","name","setup","store","dispatch","formUniversity","hasHotel","hasMilitaryDepartment","tags","getters","getTags","subjects","getSubjects","sendUniversity","response","post","map","item","id","status","image","benefits","location","passScores","budget","offBudget","description","rating","link","then","res","commit","titleValue","text","mode","e","console","log","data","error","catch","document","documentElement","scrollTop"],"sources":["E:\\Vue\\career_guidance\\src\\components\\AdminUniversity.vue"],"sourcesContent":["<template>\r\n  <h2 class=\"admin__subtitle mt50\">Добавление универов</h2>\r\n  <form class=\"admin__universities\" @submit.prevent=\"sendUniversity\">\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"name\">Название</label>\r\n      <input type=\"text\" id=\"name\" v-model.trim.lazy=\"formUniversity['name']\" placeholder=\"Название\">\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"image\">Картинка</label>\r\n      <input type=\"text\" id=\"image\" placeholder=\"Ссылка на фотографию\" v-model.trim.lazy=\"formUniversity['image']\">\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"description\">Описание</label>\r\n      <input type=\"text\" id=\"description\" placeholder=\"Описание\" v-model.trim.lazy=\"formUniversity['description']\">\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"benefits\">Преимущества</label>\r\n      <input type=\"text\" id=\"benefits\" placeholder=\"Преимущества\" v-model.trim.lazy=\"formUniversity['benefits']\">\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"location\">Город</label>\r\n      <input type=\"text\" id=\"location\" placeholder=\"Город\" v-model.trim.lazy=\"formUniversity['location']\">\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"passScores\">Проходные баллы</label>\r\n      <input type=\"number\" id=\"passScores\" placeholder=\"Проходные баллы\" v-model.trim.lazy=\"formUniversity['passScores']\">\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"website\">Сайт универа</label>\r\n      <input type=\"text\" id=\"website\" placeholder=\"Сайт\" v-model.trim.lazy=\"formUniversity['link']\">\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"tags\">Теги</label>\r\n      <select class=\"multiple\" id=\"tags\" v-model.trim.lazy=\"formUniversity['tags']\" multiple>\r\n        <option :value=\"tag\" v-for=\"tag in tags\" :key=\"tag.id\">{{tag.name}}</option>\r\n      </select>\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"subjects\">Предметы</label>\r\n      <select class=\"multiple\" id=\"subjects\" v-model.trim.lazy=\"formUniversity['subjects']\" multiple>\r\n        <option :value=\"subject\" v-for=\"subject in subjects\" :key=\"subject.id\">{{subject.name}}</option>\r\n      </select>\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"status\">Статус</label>\r\n      <select id=\"status\" v-model.trim.lazy=\"formUniversity['status']\">\r\n        <option value=\"государственный\">Государственный</option>\r\n        <option value=\"частный\" >Частный</option>\r\n      </select>\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"budget\">Бюджетных мест</label>\r\n      <input type=\"number\" id=\"budget\" placeholder=\"Бюджетных мест\" v-model.trim.lazy=\"formUniversity['budget']\">\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"offBudget\">Внебюджетных мест</label>\r\n      <input type=\"number\" id=\"offBudget\" placeholder=\"Внебюджетных мест\" v-model.trim.lazy=\"formUniversity['offBudget']\">\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"rating\">Рейтинг</label>\r\n      <input type=\"number\" id=\"rating\" min=\"1\" max=\"10\" placeholder=\"1-10\" v-model.trim.lazy=\"formUniversity['rating']\">\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"hasHotel\">Общежитие</label>\r\n      <input type=\"checkbox\" id=\"hasHotel\" placeholder=\"Общежитие\" v-model.trim.lazy=\"formUniversity['hasHotel']\">\r\n    </div>\r\n    <div class=\"admin__universities-item\">\r\n      <label for=\"hasMilitaryDepartment\">Военная кафедра</label>\r\n      <input type=\"checkbox\" placeholder=\"Военная кафедра\" id=\"hasMilitaryDepartment\" v-model.trim.lazy=\"formUniversity['hasMilitaryDepartment']\">\r\n    </div>\r\n    <button type=\"submit\" class=\"btn green admin__btn\">Отправить</button>\r\n  </form><!-- ./admin__universities -->\r\n</template>\r\n\r\n<script>\r\nimport {computed, onMounted} from \"vue\";\r\nimport {useStore} from \"vuex\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"AdminUniversity\",\r\n  setup() {\r\n    onMounted(async () => {\r\n      await store.dispatch('setAllTags')\r\n      await store.dispatch('setAllSubjects')\r\n    })\r\n\r\n    const store= useStore()\r\n    let formUniversity = {\r\n      hasHotel: false,\r\n      hasMilitaryDepartment: false\r\n    }\r\n\r\n    const tags = computed(() => store.getters.getTags)\r\n    const subjects = computed(() => store.getters.getSubjects)\r\n\r\n    const sendUniversity = async function() {\r\n      const response = await axios.post('universities', {\r\n        name: formUniversity.name,\r\n        tags: formUniversity.tags.map(item => ({id: item.id, name: item.name})),\r\n        subjects: formUniversity.subjects.map(item => ({id: item.id, name: item.name})),\r\n        status: formUniversity.status,\r\n        image: formUniversity.image,\r\n        benefits: formUniversity.benefits,\r\n        location: formUniversity.location,\r\n        passScores: formUniversity.passScores,\r\n        budget: formUniversity.budget,\r\n        offBudget: formUniversity.offBudget,\r\n        hasHotel: formUniversity.hasHotel,\r\n        hasMilitaryDepartment: formUniversity.hasMilitaryDepartment,\r\n        description: formUniversity.description,\r\n        rating: formUniversity.rating,\r\n        link: formUniversity.link,\r\n      }).then(res => {\r\n\r\n        try {\r\n          if(res.status === 200) {\r\n            store.commit('setNotificationInfo', { titleValue: 'Успех', text: 'Университет добавлен успешно!', mode: 'success'} );\r\n          }\r\n        }\r\n        catch (e) {\r\n          console.log(e)\r\n        }\r\n\r\n        try {\r\n          const data = res.response.data\r\n          const error = data.error;\r\n\r\n          if(error) {\r\n            store.commit('setNotificationInfo', { titleValue: 'Упс', text: error, mode: 'danger'} );\r\n          }\r\n        }\r\n        catch (e) {\r\n          console.log(e)\r\n        }\r\n\r\n      }).catch(error => console.log(error))\r\n      document.documentElement.scrollTop = 0;\r\n    }\r\n\r\n    return {\r\n      formUniversity,\r\n      tags, subjects,\r\n      sendUniversity\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}