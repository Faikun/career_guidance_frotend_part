{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from \"vue\";\nimport store from \"@/store\";\nexport default {\n  name: \"Login\",\n  setup() {\n    let isLogin = ref(true);\n    const passwordImage = ref(null);\n    const passwordRef = ref(null);\n    const passwordImage_2 = ref(null);\n    const passwordRef_2 = ref(null);\n    const mailRef = ref(null);\n    const nameReg = ref(null);\n    const mailReg = ref(null);\n    let name = ref('');\n    let mail = ref('');\n    let password = ref('');\n    let repeatedPassword = ref('');\n    let closeAuthBlock = function () {\n      store.commit('toggleOpenedAuth');\n      document.body.style.overflow = \"auto\";\n    };\n    let passwordToggle = function (passRef, passImage) {\n      passRef.setAttribute('type', passRef.getAttribute('type') === 'password' ? 'text' : 'password');\n      passImage.setAttribute('src', passImage.getAttribute('src') === require('../images/png/eye_opened.png') ? require('../images/png/eye_closed.png') : require('../images/png/eye_opened.png'));\n    };\n    let auth = function () {\n      if (store.getters.getUsers.filter(el => el.mail === mail.value).map(map => map.mail).indexOf(mail.value) + 1 && store.getters.getUsers.filter(el => el.password === password.value).map(map => map.password).indexOf(password.value) + 1) {\n        store.commit('setAuth');\n        closeAuthBlock();\n      } else {\n        mailRef.value.style.outline = '1px solid red';\n        passwordRef.value.style.outline = '1px solid red';\n      }\n    };\n    let namePattern = /^[a-zA-Z0-9_-]{4,16}$/;\n    // Имя пользователя от 4 до 16 символов (буквы, цифры, подчеркивания, знаки минус)\n    let passwordPattern = /^.*(?=.{6,})(?=.*\\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*? ]).*$/;\n    // минимум 6 символов, включая, как минимум 1 заглавную букву, 1 строчную букву, 1 цифру, 1 спец символ\n    let mailPattern = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;\n    // Полноценная почта\n\n    let iteration = function () {\n      function nameFunction() {\n        if (!namePattern.test(name.value)) {\n          nameReg.value.style.outline = '1px solid red';\n          return false;\n        } else {\n          nameReg.value.style.outline = '1px solid black';\n          return true;\n        }\n      }\n      function mailFunction() {\n        if (!mailPattern.test(mail.value)) {\n          mailReg.value.style.outline = '1px solid red';\n          return false;\n        } else {\n          mailReg.value.style.outline = '1px solid black';\n          return true;\n        }\n      }\n      function passwordFunction() {\n        if (!passwordPattern.test(password.value)) {\n          passwordRef.value.style.outline = '1px solid red';\n          return false;\n        } else {\n          passwordRef.value.style.outline = '1px solid black';\n          return true;\n        }\n      }\n      function passwordEqualFunction() {\n        if (password.value !== repeatedPassword.value) {\n          passwordRef_2.value.style.outline = '1px solid red';\n          return false;\n        } else {\n          passwordRef_2.value.style.outline = '1px solid black';\n          return true;\n        }\n      }\n      if (nameFunction() && mailFunction() && passwordFunction() && passwordEqualFunction()) {\n        return true;\n      } else {\n        return false;\n      }\n    };\n    let register = function () {\n      console.log(iteration());\n      if (iteration()) {\n        store.getters.getUsers.push({\n          userId: store.getters.getUsers.length + 1,\n          name: name.value,\n          mail: mail.value,\n          password: password.value\n        });\n        closeAuthBlock();\n      } else {}\n    };\n    return {\n      name,\n      mail,\n      password,\n      repeatedPassword,\n      passwordToggle,\n      passwordImage,\n      passwordRef,\n      passwordImage_2,\n      passwordRef_2,\n      store,\n      closeAuthBlock,\n      isLogin,\n      auth,\n      register,\n      nameReg,\n      mailReg,\n      mailRef\n    };\n  }\n};","map":{"version":3,"names":["ref","store","name","setup","isLogin","passwordImage","passwordRef","passwordImage_2","passwordRef_2","mailRef","nameReg","mailReg","mail","password","repeatedPassword","closeAuthBlock","commit","document","body","style","overflow","passwordToggle","passRef","passImage","setAttribute","getAttribute","require","auth","getters","getUsers","filter","el","value","map","indexOf","outline","namePattern","passwordPattern","mailPattern","iteration","nameFunction","test","mailFunction","passwordFunction","passwordEqualFunction","register","console","log","push","userId","length"],"sources":["E:\\Vue\\career_guidance\\src\\components\\TheAuth.vue"],"sourcesContent":["<template>\r\n<div class=\"auth\" v-if=\"store.getters.getOpenedAuth\">\r\n  <div class=\"auth__mask\" @click=\"closeAuthBlock\"></div><!-- ./login__mask -->\r\n\r\n  <form v-if=\"isLogin\" class=\"auth__wrapper\">\r\n    <div class=\"auth__intro\">\r\n      <h1 class=\"auth__name\">Вход</h1>\r\n      <img class=\"auth__close\" src=\"../images/png/Close.png\" alt=\"close\" @click=\"closeAuthBlock\">\r\n    </div><!--./auth__intro -->\r\n    <div class=\"auth__inputs\">\r\n      <div class=\"auth__inputs-item\">\r\n        <input placeholder=\"Почта\" type=\"text\" v-model.trim=\"mail\" ref=\"mailRef\">\r\n      </div><!-- ./auth__inputs-item -->\r\n      <div class=\"auth__inputs-item\">\r\n        <input placeholder=\"Пароль\" type=\"password\" v-model.trim=\"password\" ref=\"passwordRef\">\r\n        <img\r\n             @click=\"passwordToggle(passwordRef, passwordImage)\"\r\n             class=\"auth__inputs-itemEye\"\r\n             src=\"../images/png/eye_opened.png\"\r\n             alt=\"visible/invisible password\"\r\n             ref=\"passwordImage\"\r\n        >\r\n      </div><!-- ./auth__inputs-item -->\r\n    </div><!-- ./auth__inputs -->\r\n    <button type=\"button\" class=\"btn blue auth__button\" @click.prevent=\"auth\">Войти</button><!-- ./auth__button -->\r\n    <router-link to=\"/reset\" class=\"auth__forgot\" @click=\"store.commit('toggleOpenedAuth')\">Забыли пароль?</router-link>\r\n    <button class=\"auth__reg\" type=\"submit\" @click=\"isLogin = false\">Быстрая регистрация</button>\r\n  </form><!-- ./auth__wrapper -->\r\n\r\n  <form v-else class=\"auth__wrapper\">\r\n    <div class=\"auth__intro\">\r\n      <h1 class=\"auth__name\">Регистрация</h1>\r\n      <img class=\"auth__close\" src=\"../images/png/Close.png\" alt=\"close\" @click=\"closeAuthBlock\">\r\n    </div><!--./auth__intro -->\r\n    <div class=\"auth__inputs\">\r\n      <div class=\"auth__inputs-item\">\r\n        <input placeholder=\"Имя\" type=\"text\" v-model.trim=\"name\" ref=\"nameReg\">\r\n      </div><!-- ./auth__inputs-item -->\r\n      <div class=\"auth__inputs-item\">\r\n        <input placeholder=\"Почта\" type=\"text\" v-model.trim=\"mail\" ref=\"mailReg\">\r\n      </div><!-- ./auth__inputs-item -->\r\n      <div class=\"auth__inputs-item\">\r\n        <input placeholder=\"Пароль\" type=\"password\" v-model.trim=\"password\" ref=\"passwordRef\">\r\n        <img\r\n            @click=\"passwordToggle(passwordRef, passwordImage)\"\r\n            class=\"auth__inputs-itemEye\"\r\n            src=\"../images/png/eye_opened.png\"\r\n            alt=\"visible/invisible password\"\r\n            ref=\"passwordImage\"\r\n        >\r\n      </div><!-- ./auth__inputs-item -->\r\n      <div class=\"auth__inputs-item\">\r\n        <input placeholder=\"Подтвердить пароль\" type=\"password\" v-model.trim=\"repeatedPassword\" ref=\"passwordRef_2\">\r\n        <img\r\n            @click=\"passwordToggle(passwordRef_2, passwordImage_2)\"\r\n            class=\"auth__inputs-itemEye\"\r\n            src=\"../images/png/eye_opened.png\"\r\n            alt=\"visible/invisible password\"\r\n            ref=\"passwordImage_2\"\r\n        >\r\n      </div><!-- ./auth__inputs-item -->\r\n    </div><!-- ./auth__inputs -->\r\n    <button type=\"submit\" class=\"auth__button btn blue\" @click.prevent=\"register\">Регистрация</button><!-- ./auth__button -->\r\n    <a @click=\"isLogin = true\" class=\"auth__forgot\" href=\"#\">Назад</a>\r\n  </form><!-- ./auth__wrapper -->\r\n\r\n</div><!-- ./auth -->\r\n</template>\r\n\r\n<script>\r\nimport {ref} from \"vue\";\r\nimport store from \"@/store\";\r\nexport default {\r\n  name: \"Login\",\r\n  setup () {\r\n    let isLogin = ref(true)\r\n\r\n    const passwordImage = ref(null)\r\n    const passwordRef = ref(null)\r\n    const passwordImage_2 = ref(null)\r\n    const passwordRef_2 = ref(null)\r\n    const mailRef = ref(null)\r\n\r\n    const nameReg = ref(null);\r\n    const mailReg = ref(null);\r\n\r\n    let name = ref('');\r\n    let mail = ref('');\r\n    let password = ref('');\r\n    let repeatedPassword = ref('');\r\n\r\n    let closeAuthBlock = function () {\r\n      store.commit('toggleOpenedAuth');\r\n      document.body.style.overflow = \"auto\";\r\n    }\r\n\r\n    let passwordToggle = function (passRef, passImage) {\r\n      passRef.setAttribute('type',\r\n          passRef.getAttribute('type') === 'password' ? 'text' : 'password');\r\n      passImage.setAttribute('src',\r\n          passImage.getAttribute('src') === require('../images/png/eye_opened.png') ?\r\n              require('../images/png/eye_closed.png') : require('../images/png/eye_opened.png'));\r\n    }\r\n\r\n    let auth = function () {\r\n      if(store.getters.getUsers\r\n        .filter((el) => el.mail === mail.value)\r\n        .map(map => map.mail)\r\n        .indexOf(mail.value) + 1\r\n        &&\r\n        store.getters.getUsers\r\n        .filter((el) => el.password === password.value)\r\n        .map(map => map.password)\r\n        .indexOf(password.value) + 1) {\r\n          store.commit('setAuth');\r\n          closeAuthBlock();\r\n      }\r\n      else {\r\n        mailRef.value.style.outline = '1px solid red';\r\n        passwordRef.value.style.outline = '1px solid red';\r\n      }\r\n    }\r\n\r\n    let namePattern = /^[a-zA-Z0-9_-]{4,16}$/;\r\n    // Имя пользователя от 4 до 16 символов (буквы, цифры, подчеркивания, знаки минус)\r\n    let passwordPattern = /^.*(?=.{6,})(?=.*\\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*? ]).*$/;\r\n    // минимум 6 символов, включая, как минимум 1 заглавную букву, 1 строчную букву, 1 цифру, 1 спец символ\r\n    let mailPattern = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;\r\n    // Полноценная почта\r\n\r\n    let iteration = function () {\r\n      function nameFunction () {\r\n        if(!namePattern.test(name.value)) {\r\n          nameReg.value.style.outline = '1px solid red';\r\n          return false\r\n        }\r\n        else {\r\n          nameReg.value.style.outline = '1px solid black';\r\n          return true\r\n        }\r\n      }\r\n\r\n      function mailFunction () {\r\n        if(!mailPattern.test(mail.value)) {\r\n          mailReg.value.style.outline = '1px solid red';\r\n          return false\r\n        }\r\n        else {\r\n          mailReg.value.style.outline = '1px solid black';\r\n          return true\r\n        }\r\n      }\r\n\r\n      function passwordFunction () {\r\n        if(!passwordPattern.test(password.value)) {\r\n          passwordRef.value.style.outline = '1px solid red';\r\n          return false\r\n        }\r\n        else {\r\n          passwordRef.value.style.outline = '1px solid black';\r\n          return true\r\n        }\r\n      }\r\n\r\n      function passwordEqualFunction () {\r\n        if(password.value !== repeatedPassword.value) {\r\n          passwordRef_2.value.style.outline = '1px solid red';\r\n          return false\r\n        }\r\n        else {\r\n          passwordRef_2.value.style.outline = '1px solid black';\r\n          return true\r\n        }\r\n      }\r\n\r\n      if(nameFunction() && mailFunction() && passwordFunction() && passwordEqualFunction()) {\r\n        return true\r\n      }\r\n      else {\r\n        return false\r\n      }\r\n    }\r\n\r\n    let register = function () {\r\n      console.log(iteration())\r\n      if(iteration()){\r\n        store.getters.getUsers.push({\r\n          userId: store.getters.getUsers.length + 1,\r\n          name: name.value,\r\n          mail: mail.value,\r\n          password: password.value\r\n        })\r\n        closeAuthBlock();\r\n      }\r\n      else {\r\n\r\n      }\r\n    }\r\n\r\n    return {\r\n      name, mail, password, repeatedPassword,\r\n      passwordToggle,\r\n      passwordImage, passwordRef, passwordImage_2, passwordRef_2,\r\n      store,\r\n      closeAuthBlock,\r\n      isLogin,\r\n      auth, register,\r\n      nameReg, mailReg, mailRef\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}