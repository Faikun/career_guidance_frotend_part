{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { computed, ref } from \"vue\";\nimport router from \"@/router\";\nimport Comments from \"@/components/Comments.vue\";\nimport { useStore } from \"vuex\";\nimport { useRoute } from \"vue-router\";\nimport { getTests } from \"@/store/getDataFromTheServer/getTests\";\nexport default {\n  name: \"Test\",\n  components: {\n    Comments\n  },\n  props: ['name'],\n  setup() {\n    console.log(getTests().then(result => result));\n    let questionNum = ref(0);\n    const store = useStore();\n    const route = useRoute();\n    const tests = computed(() => store.getters.getTests);\n    const routeName = computed(() => route.params.name);\n    const test = tests.value.filter(el => el.name === routeName.value)[0].questions;\n    let que = tests.value.filter(el => el.name === routeName.value)[0].question;\n    let firstUnanswered = computed(() => test.findIndex(test => test.isAnswered === false));\n    let checkQuestionCompleted = computed(() => test.reduce((accumulator, currentValue) => accumulator + (currentValue.isAnswered ? 1 : 0), 0));\n    let nextQuestion = function (question, answer) {\n      if (checkQuestionCompleted.value + 1 !== test.length) {\n        this.test[question].isAnswered = true;\n        this.test[question].chosenAnswer = answer;\n        if (firstUnanswered.value > -1) {\n          questionNum.value = firstUnanswered.value;\n        } else {\n          questionNum.value++;\n        }\n      } else {\n        this.test[question].isAnswered = true;\n        setTimeout(() => {\n          router.push('/result');\n        }, 250);\n      }\n    };\n    return {\n      questionNum,\n      test,\n      nextQuestion,\n      checkQuestionCompleted,\n      que\n    };\n  }\n};","map":{"version":3,"names":["computed","ref","router","Comments","useStore","useRoute","getTests","name","components","props","setup","console","log","then","result","questionNum","store","route","tests","getters","routeName","params","test","value","filter","el","questions","que","question","firstUnanswered","findIndex","isAnswered","checkQuestionCompleted","reduce","accumulator","currentValue","nextQuestion","answer","length","chosenAnswer","setTimeout","push"],"sources":["E:\\Vue\\career_guidance\\src\\views\\Test.vue"],"sourcesContent":["<template>\r\n<div class=\"test\">\r\n  <h1 class=\"test__title\">{{ name }}</h1>\r\n\r\n  <div class=\"test__questionCounter\">Вопрос {{ test[questionNum].id }}</div>\r\n\r\n  <div class=\"test__question\">\r\n    <div class=\"test__question-name\"> {{ test[questionNum].question }} </div>\r\n    <div class=\"test__question-answers\">\r\n      <div\r\n          class=\"test__question-answer\"\r\n          @click=\"nextQuestion(questionNum, test[questionNum].answer_1)\"\r\n      >\r\n        {{ test[questionNum].answer_1 }}\r\n      </div>\r\n      <div\r\n          class=\"test__question-answer\"\r\n          @click=\"nextQuestion(questionNum, test[questionNum].answer_2)\"\r\n      >\r\n        {{ test[questionNum].answer_2 }}\r\n      </div>\r\n    </div>\r\n  </div><!-- ./test__question -->\r\n  <div class=\"test__passed\">\r\n    Вы ответили на\r\n    {{ checkQuestionCompleted }}\r\n    из {{ test.length }} вопросов\r\n  </div>\r\n  <div class=\"test__questionNums\">\r\n    <div\r\n        :class=\"test[num-1].isAnswered ? 'active': ''\"\r\n        v-for=\"num in test.length\"\r\n        @click=\"questionNum = num-1\"\r\n        class=\"test__questionNum\">{{ num }}</div>\r\n  </div><!-- ./test__questionNums -->\r\n</div><!-- ./test -->\r\n<comments></comments>\r\n</template>\r\n\r\n<script>\r\nimport {computed, ref} from \"vue\";\r\nimport router from \"@/router\";\r\nimport Comments from \"@/components/Comments.vue\";\r\nimport {useStore} from \"vuex\";\r\nimport {useRoute} from \"vue-router\";\r\nimport {getTests} from \"@/store/getDataFromTheServer/getTests\";\r\n\r\nexport default {\r\n  name: \"Test\",\r\n  components: { Comments },\r\n  props: ['name'],\r\n  setup() {\r\n    console.log(getTests().then(result => result))\r\n\r\n    let questionNum = ref(0);\r\n    const store = useStore();\r\n    const route = useRoute();\r\n    const tests = computed(() => store.getters.getTests);\r\n    const routeName = computed(() => route.params.name);\r\n    const test = tests.value.filter((el) => el.name === routeName.value)[0].questions;\r\n    let que = tests.value.filter((el) => el.name === routeName.value)[0].question;\r\n\r\n    let firstUnanswered = computed(() => test.findIndex(test => test.isAnswered === false));\r\n    let checkQuestionCompleted = computed(() => test.reduce((accumulator, currentValue) => accumulator + (currentValue.isAnswered ? 1 : 0), 0))\r\n    let nextQuestion = function (question, answer) {\r\n      if(checkQuestionCompleted.value + 1 !== test.length) {\r\n        this.test[question].isAnswered = true;\r\n        this.test[question].chosenAnswer = answer;\r\n\r\n        if (firstUnanswered.value > -1) {\r\n          questionNum.value = firstUnanswered.value;\r\n        }\r\n        else {\r\n          questionNum.value++;\r\n        }\r\n      }\r\n      else {\r\n        this.test[question].isAnswered = true;\r\n        setTimeout(() => { router.push('/result'); }, 250);\r\n      }\r\n    }\r\n    return {\r\n      questionNum,\r\n      test,\r\n      nextQuestion,\r\n      checkQuestionCompleted,\r\n      que\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";AAwCA,SAAQA,QAAQ,EAAEC,GAAG,QAAO,KAAK;AACjC,OAAOC,MAAK,MAAO,UAAU;AAC7B,OAAOC,QAAO,MAAO,2BAA2B;AAChD,SAAQC,QAAQ,QAAO,MAAM;AAC7B,SAAQC,QAAQ,QAAO,YAAY;AACnC,SAAQC,QAAQ,QAAO,uCAAuC;AAE9D,eAAe;EACbC,IAAI,EAAE,MAAM;EACZC,UAAU,EAAE;IAAEL;EAAS,CAAC;EACxBM,KAAK,EAAE,CAAC,MAAM,CAAC;EACfC,KAAKA,CAAA,EAAG;IACNC,OAAO,CAACC,GAAG,CAACN,QAAQ,EAAE,CAACO,IAAI,CAACC,MAAK,IAAKA,MAAM,CAAC;IAE7C,IAAIC,WAAU,GAAId,GAAG,CAAC,CAAC,CAAC;IACxB,MAAMe,KAAI,GAAIZ,QAAQ,EAAE;IACxB,MAAMa,KAAI,GAAIZ,QAAQ,EAAE;IACxB,MAAMa,KAAI,GAAIlB,QAAQ,CAAC,MAAMgB,KAAK,CAACG,OAAO,CAACb,QAAQ,CAAC;IACpD,MAAMc,SAAQ,GAAIpB,QAAQ,CAAC,MAAMiB,KAAK,CAACI,MAAM,CAACd,IAAI,CAAC;IACnD,MAAMe,IAAG,GAAIJ,KAAK,CAACK,KAAK,CAACC,MAAM,CAAEC,EAAE,IAAKA,EAAE,CAAClB,IAAG,KAAMa,SAAS,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC,CAACG,SAAS;IACjF,IAAIC,GAAE,GAAIT,KAAK,CAACK,KAAK,CAACC,MAAM,CAAEC,EAAE,IAAKA,EAAE,CAAClB,IAAG,KAAMa,SAAS,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC,CAACK,QAAQ;IAE7E,IAAIC,eAAc,GAAI7B,QAAQ,CAAC,MAAMsB,IAAI,CAACQ,SAAS,CAACR,IAAG,IAAKA,IAAI,CAACS,UAAS,KAAM,KAAK,CAAC,CAAC;IACvF,IAAIC,sBAAqB,GAAIhC,QAAQ,CAAC,MAAMsB,IAAI,CAACW,MAAM,CAAC,CAACC,WAAW,EAAEC,YAAY,KAAKD,WAAU,IAAKC,YAAY,CAACJ,UAAS,GAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;IAC1I,IAAIK,YAAW,GAAI,SAAAA,CAAUR,QAAQ,EAAES,MAAM,EAAE;MAC7C,IAAGL,sBAAsB,CAACT,KAAI,GAAI,MAAMD,IAAI,CAACgB,MAAM,EAAE;QACnD,IAAI,CAAChB,IAAI,CAACM,QAAQ,CAAC,CAACG,UAAS,GAAI,IAAI;QACrC,IAAI,CAACT,IAAI,CAACM,QAAQ,CAAC,CAACW,YAAW,GAAIF,MAAM;QAEzC,IAAIR,eAAe,CAACN,KAAI,GAAI,CAAC,CAAC,EAAE;UAC9BR,WAAW,CAACQ,KAAI,GAAIM,eAAe,CAACN,KAAK;QAC3C,OACK;UACHR,WAAW,CAACQ,KAAK,EAAE;QACrB;MACF,OACK;QACH,IAAI,CAACD,IAAI,CAACM,QAAQ,CAAC,CAACG,UAAS,GAAI,IAAI;QACrCS,UAAU,CAAC,MAAM;UAAEtC,MAAM,CAACuC,IAAI,CAAC,SAAS,CAAC;QAAE,CAAC,EAAE,GAAG,CAAC;MACpD;IACF;IACA,OAAO;MACL1B,WAAW;MACXO,IAAI;MACJc,YAAY;MACZJ,sBAAsB;MACtBL;IACF;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}